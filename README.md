# 除雪アラート（Josetsu Alert）

道路除雪において、過去に同じ場所で起きた事故の内容を、スマホから音声で注意喚起するWebアプリです。

## 機能

- **現在地監視**: GPSで現在地を取得し、登録された事故地点に近づくとお知らせ
- **音声読み上げ**: 該当地点の事故内容をブラウザの音声合成で読み上げ（ON/OFF可能）
- **事故一覧**: 登録された事故を距離順で表示
- **設定**: 通知する距離（50m / 100m / 200m）を変更可能

## 開発

```bash
npm install
npm run dev
```

ブラウザで http://localhost:5173 を開き、位置情報を許可すると動作します。

## ビルド

```bash
npm run build
npm run preview   # ビルド結果のプレビュー
```

## 事故データ

`public/data/accidents.json` に事故データを配置してください。形式は以下のとおりです。

```json
[
  {
    "id": "一意のID",
    "latitude": 緯度,
    "longitude": 経度,
    "description": "音声で読み上げる説明文",
    "occurred_at": "YYYY-MM または YYYY-MM-DD",
    "category": "転落・接触・巻き込み など"
  }
]
```

サンプルとして2件のデータが含まれています（新潟県上越市付近の座標）。実際の運用では自治体のデータや手動登録に差し替えてください。

## 構成

- **コア層** (`src/core/`): 距離計算・近隣判定・読み上げ文生成（プラットフォーム非依存）
- **アダプター** (`src/adapters/`): 位置取得・音声再生の抽象化（現在はブラウザ実装）
- **UI** (`src/components/`): メイン・一覧・設定画面

将来のスマホアプリ化時は、コアとアダプターを流用し、UI層の差し替えや Capacitor によるラップで対応できます。

## PWA

`public/manifest.webmanifest` を設置済みです。対応ブラウザでは「ホーム画面に追加」でアプリのように利用できます。Service Worker によるオフライン対応は未実装です。
